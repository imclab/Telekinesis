window.Telekinesis=function(){function t(t){this.identifier=h,h+=1,this.type=t in s?t:e(),c.push(this),this.x=0,this.y=0}function o(t,o,e){this.x=o||this.x,this.y=e||this.y,t=s[this.type][t];var i=document.elementFromPoint(this.x,this.y);if(!i)return console.warn('"'+t+'" out of bound at x:'+this.x+", y:"+this.y),void 0;var r=n.call(this,i);u(t,r,i)}function n(t){var o,n=document.documentElement.scrollLeft||document.body.scrollLeft,e=document.documentElement.scrollTop||document.body.scrollTop,u={identifier:this.identifier,clientX:this.x,clientY:this.y,pageX:this.x+n,pageY:this.y+e,target:t};return this.target=t,this.point=u,o="touch"===this.type?{touches:i(),changedTouches:[u],targetTouches:r(t)}:u}function e(){return"ontouchstart"in window?"touch":"mouse"}function i(){var t=[];return c.forEach(function(o){o.active&&t.push(o.point)}),t}function r(t){var o=[];return c.forEach(function(n){n.active&&n.target===t&&o.push(n.point)}),o}function u(t,o,n){var e=document.createEvent("CustomEvent");e.initEvent(t,!0,!0);for(var i in o)e[i]=o[i];n.dispatchEvent(e)}var s={mouse:{down:"mousedown",move:"mousemove",up:"mouseend"},touch:{down:"touchstart",move:"touchmove",up:"touchend"},pointer:{down:"pointerdown",move:"pointermove",up:"pointerup"}},c=[],h=0;return t.prototype={down:function(t,n){if(t instanceof HTMLElement){var e=t.getBoundingClientRect();t=e.left+e.width/2,n=e.top+e.height/2}return this.active=!0,o.call(this,"down",t,n),this},move:function(t,n){return o.call(this,"move",t,n),this},up:function(t,n){return this.active=!1,o.call(this,"up",t,n),this},moveBy:function(t,o){this.move(this.x+t,this.y+o)}},{Finger:t,getAll:function(){return c.map(function(t){return t})},removeAll:function(){c=[],h=0}}}(),Telekinesis.Finger.prototype.drag=function(){var t=.75,o=16;return function(n){function e(){return d>=f?(i.up(v,l),n.done&&n.done(),void 0):(d+=1,v+=a,l+=m,i.move(v,l),setTimeout(e,o),void 0)}var i=this;if(!(n.from||n.to&&n.by))return console.warn("Insufficient options for Telekinesis.drag()"),void 0;if(n.on instanceof HTMLElement){var r=n.on.getBoundingClientRect();n.from.x+=r.left,n.from.y+=r.top}n.by&&!n.to&&(n.to={x:n.from.x+n.by.x,y:n.from.y+n.by.y});var u=n.to.x-n.from.x,s=n.to.y-n.from.y,c=Math.sqrt(u*u+s*s),h=n.duration||c/t,f=Math.round(h/o),a=u/f,m=s/f,d=0,v=n.from.x,l=n.from.y;i.down(v,l),e()}}();