window.Telekinesis=function(){function t(t){this.identifier=a,a+=1,this.type=t in u?t:o(),h.push(this),this.x=0,this.y=0}function e(t,e,o,i){this.x=e||this.x,this.y=o||this.y,t=u[this.type][t];var r=document.elementFromPoint(this.x,this.y);if(!r)return console.warn('"'+t+'" out of bound at x:'+this.x+", y:"+this.y),void 0;var s=n.call(this,r,i);c(t,s,r)}function n(t,e){var n,o=document.body.scrollLeft||document.documentElement.scrollLeft,r=document.body.scrollTop||document.documentElement.scrollTop,c=window.screenX||window.screenLeft,u=window.screenY||window.screenTop,h={identifier:this.identifier,clientX:this.x,clientY:this.y,screenX:this.x+c,screenY:this.y+u,pageX:this.x+o,pageY:this.y+r,target:t};for(var a in e)a in h||(h[a]=e[a]);return this.target=t,this.point=h,n="touch"===this.type?{touches:i(),changedTouches:[h],targetTouches:s(t)}:h}function o(){return"ontouchstart"in window?"touch":"mouse"}function i(){var t=[];return h.forEach(function(e){e.active&&t.push(e.point)}),t}function r(){h=[],a=0}function s(t){var e=[];return h.forEach(function(n){n.active&&n.target===t&&e.push(n.point)}),e}function c(t,e,n){var o;if(t.match(f))o=document.createEvent("MouseEvents"),o.initMouseEvent(t,!0,!0,window,0,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey||!1,e.altKey||!1,e.shiftKey||!1,e.metaKey||!1,e.button||1,n);else{o=document.createEvent("CustomEvent"),o.initEvent(t,!0,!0);for(var i in e)o[i]=e[i]}n.dispatchEvent(o)}var u={mouse:{down:"mousedown",move:"mousemove",up:"mouseup"},touch:{down:"touchstart",move:"touchmove",up:"touchend"},pointer:{down:"pointerdown",move:"pointermove",up:"pointerup"}},h=[],a=0,f=/^mouse.+/;return t.prototype={down:function(t,n,o){if(t instanceof HTMLElement||"string"==typeof t){if("string"==typeof t&&(t=document.querySelector(t),!t))return console.warn("Finger.down() selector matched no target."),void 0;o=n;var i=t.getBoundingClientRect();t=i.left+i.width/2,n=i.top+i.height/2}return this.active=!0,e.call(this,"down",t,n,o),this},move:function(t,n,o){return e.call(this,"move",t,n,o),this},up:function(t,n,o){return this.active=!1,"[object Object]"===Object.prototype.toString.call(t)?e.call(this,"up",null,null,t):e.call(this,"up",t,n,o),this},moveBy:function(t,e,n){this.move(this.x+t,this.y+e,n)}},{Finger:t,getAll:i,removeAll:r}}(),Telekinesis.Finger.prototype.drag=function(){var t=.75,e=16;return function(n){function o(){return d>=a?(i.up(m,v),n.done&&n.done(),void 0):(d+=1,m+=f,v+=l,i.move(m,v),setTimeout(o,e),void 0)}var i=this;if(!(n.from||n.to&&n.by))return console.warn("Insufficient options for Telekinesis.drag()"),void 0;if(n.on instanceof HTMLElement){var r=n.on.getBoundingClientRect();n.from.x+=r.left,n.from.y+=r.top}n.by&&!n.to&&(n.to={x:n.from.x+n.by.x,y:n.from.y+n.by.y});var s=n.to.x-n.from.x,c=n.to.y-n.from.y,u=Math.sqrt(s*s+c*c),h=n.duration||u/t,a=Math.round(h/e),f=s/a,l=c/a,d=0,m=n.from.x,v=n.from.y;i.down(m,v),o()}}();