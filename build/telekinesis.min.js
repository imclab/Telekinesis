window.Telekinesis=function(){function t(t){this.identifier=h,h+=1,this.type=t in u?t:o(),c.push(this),this.x=0,this.y=0}function e(t,e,o,i){this.x=e||this.x,this.y=o||this.y,t=u[this.type][t];var r=document.elementFromPoint(this.x,this.y);if(!r)return console.warn('"'+t+'" out of bound at x:'+this.x+", y:"+this.y),void 0;var c=n.call(this,r,i);s(t,c,r)}function n(t,e){var n,o=document.body.scrollLeft||document.documentElement.scrollLeft,s=document.body.scrollTop||document.documentElement.scrollTop,u=window.screenX||window.screenLeft,c=window.screenY||window.screenTop,h={identifier:this.identifier,clientX:this.x,clientY:this.y,screenX:this.x+u,screenY:this.y+c,pageX:this.x+o,pageY:this.y+s,target:t};this.target=t,this.point=h,n="touch"===this.type?{touches:i(),changedTouches:[h],targetTouches:r(t)}:h;for(var f in e)n[f]=e[f];return n}function o(){return"ontouchstart"in window?"touch":"mouse"}function i(){var t=[];return c.forEach(function(e){e.active&&t.push(e.point)}),t}function r(t){var e=[];return c.forEach(function(n){n.active&&n.target===t&&e.push(n.point)}),e}function s(t,e,n){var o;if(t.match(f))o=document.createEvent("MouseEvents"),o.initMouseEvent(t,!0,!0,window,0,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey||!1,e.altKey||!1,e.shiftKey||!1,e.metaKey||!1,e.button||1,n);else{o=document.createEvent("CustomEvent"),o.initEvent(t,!0,!0);for(var i in e)o[i]=e[i]}n.dispatchEvent(o)}var u={mouse:{down:"mousedown",move:"mousemove",up:"mouseup"},touch:{down:"touchstart",move:"touchmove",up:"touchend"},pointer:{down:"pointerdown",move:"pointermove",up:"pointerup"}},c=[],h=0,f=/^mouse.+/;return t.prototype={down:function(t,n,o){if(t instanceof HTMLElement){var i=t.getBoundingClientRect();t=i.left+i.width/2,n=i.top+i.height/2}return this.active=!0,e.call(this,"down",t,n,o),this},move:function(t,n,o){return e.call(this,"move",t,n,o),this},up:function(t,n,o){return this.active=!1,e.call(this,"up",t,n,o),this},moveBy:function(t,e,n){this.move(this.x+t,this.y+e,n)}},{Finger:t,getAll:function(){return c.map(function(t){return t})},removeAll:function(){c=[],h=0}}}(),Telekinesis.Finger.prototype.drag=function(){var t=.75,e=16;return function(n){function o(){return d>=f?(i.up(l,v),n.done&&n.done(),void 0):(d+=1,l+=a,v+=m,i.move(l,v),setTimeout(o,e),void 0)}var i=this;if(!(n.from||n.to&&n.by))return console.warn("Insufficient options for Telekinesis.drag()"),void 0;if(n.on instanceof HTMLElement){var r=n.on.getBoundingClientRect();n.from.x+=r.left,n.from.y+=r.top}n.by&&!n.to&&(n.to={x:n.from.x+n.by.x,y:n.from.y+n.by.y});var s=n.to.x-n.from.x,u=n.to.y-n.from.y,c=Math.sqrt(s*s+u*u),h=n.duration||c/t,f=Math.round(h/e),a=s/f,m=u/f,d=0,l=n.from.x,v=n.from.y;i.down(l,v),o()}}();