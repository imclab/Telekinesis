window.Telekinesis=function(){function t(t){this.identifier=h,h+=1,this.type=t in s?t:e(),c.push(this),this.x=0,this.y=0}function n(t,n,e){this.x=n||this.x,this.y=e||this.y,t=s[this.type][t];var i=document.elementFromPoint(this.x,this.y);if(!i)return console.warn('"'+t+'" out of bound at x:'+this.x+", y:"+this.y),void 0;var r=o.call(this,event,i);u(t,r,i)}function o(t,n){var o,e=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,s={identifier:this.identifier,clientX:this.x,clientY:this.y,pageX:this.x+e,pageY:this.y+u,target:n};return this.target=n,this.point=s,o="touch"===this.type?{touches:i(),changedTouches:[s],targetTouches:r(n)}:s}function e(){return"ontouchstart"in window?"touch":"mouse"}function i(){var t=[];return c.forEach(function(n){n.active&&t.push(n.point)}),t}function r(t){var n=[];return c.forEach(function(o){o.active&&o.target===t&&n.push(o.point)}),n}function u(t,n,o){var e=document.createEvent("CustomEvent");e.initEvent(t,!0,!0);for(var i in n)e[i]=n[i];o.dispatchEvent(e)}var s={mouse:{down:"mousedown",move:"mousemove",up:"mouseend"},touch:{down:"touchstart",move:"touchmove",up:"touchend"},pointer:{down:"pointerdown",move:"pointermove",up:"pointerup"}},c=[],h=0;return t.prototype={down:function(t,o){if(t instanceof HTMLElement){var e=t.getBoundingClientRect();t=e.left+e.width/2,o=e.top+e.height/2}return this.active=!0,n.call(this,"down",t,o),this},move:function(t,o){return n.call(this,"move",t,o),this},up:function(t,o){return this.active=!1,n.call(this,"up",t,o),this},moveBy:function(t,n){this.move(this.x+t,this.y+n)}},{Finger:t,getAll:function(){return c.map(function(t){return t})},removeAll:function(){c=[],h=0}}}(),Telekinesis.Finger.prototype.drag=function(){var t=.75,n=16;return function(o){function e(){return d>=f?(i.up(v,l),o.done&&o.done(),void 0):(d+=1,v+=a,l+=m,i.move(v,l),setTimeout(e,n),void 0)}var i=this;if(!(o.from||o.to&&o.by))return console.warn("Insufficient options for Telekinesis.drag()"),void 0;if(o.on instanceof HTMLElement){var r=o.on.getBoundingClientRect();o.from.x+=r.left,o.from.y+=r.top}o.by&&!o.to&&(o.to={x:o.from.x+o.by.x,y:o.from.y+o.by.y});var u=o.to.x-o.from.x,s=o.to.y-o.from.y,c=Math.sqrt(u*u+s*s),h=o.duration||c/t,f=Math.round(h/n),a=u/f,m=s/f,d=0,v=o.from.x,l=o.from.y;i.down(v,l),e()}}();