window.Telekinesis=function(){function t(t){this.identifier=h,h+=1,this.type=t in s?t:o(),c.push(this),this.x=0,this.y=0}function n(t,n,o){this.x=n||this.x,this.y=o||this.y,t=s[this.type][t];var i=document.elementFromPoint(this.x,this.y);if(!i)return console.warn('"'+t+'" out of bound at x:'+this.x+", y:"+this.y),void 0;var r=e.call(this,i);u(t,r,i)}function e(t){var n,e=document.body.scrollLeft||document.documentElement.scrollLeft,o=document.body.scrollTop||document.documentElement.scrollTop,u=window.screenX||window.screenLeft,s=window.screenY||window.screenTop,c={identifier:this.identifier,clientX:this.x,clientY:this.y,screenX:this.x+u,screenY:this.y+s,pageX:this.x+e,pageY:this.y+o,target:t};return this.target=t,this.point=c,n="touch"===this.type?{touches:i(),changedTouches:[c],targetTouches:r(t)}:c}function o(){return"ontouchstart"in window?"touch":"mouse"}function i(){var t=[];return c.forEach(function(n){n.active&&t.push(n.point)}),t}function r(t){var n=[];return c.forEach(function(e){e.active&&e.target===t&&n.push(e.point)}),n}function u(t,n,e){var o;o=t.match(f)?document.createEvent("MouseEvents"):document.createEvent("CustomEvent"),o.initEvent(t,!0,!0);for(var i in n)o[i]=n[i];e.dispatchEvent(o)}var s={mouse:{down:"mousedown",move:"mousemove",up:"mouseup"},touch:{down:"touchstart",move:"touchmove",up:"touchend"},pointer:{down:"pointerdown",move:"pointermove",up:"pointerup"}},c=[],h=0,f=/^mouse.+/;return t.prototype={down:function(t,e){if(t instanceof HTMLElement){var o=t.getBoundingClientRect();t=o.left+o.width/2,e=o.top+o.height/2}return this.active=!0,n.call(this,"down",t,e),this},move:function(t,e){return n.call(this,"move",t,e),this},up:function(t,e){return this.active=!1,n.call(this,"up",t,e),this},moveBy:function(t,n){this.move(this.x+t,this.y+n)}},{Finger:t,getAll:function(){return c.map(function(t){return t})},removeAll:function(){c=[],h=0}}}(),Telekinesis.Finger.prototype.drag=function(){var t=.75,n=16;return function(e){function o(){return d>=f?(i.up(v,l),e.done&&e.done(),void 0):(d+=1,v+=a,l+=m,i.move(v,l),setTimeout(o,n),void 0)}var i=this;if(!(e.from||e.to&&e.by))return console.warn("Insufficient options for Telekinesis.drag()"),void 0;if(e.on instanceof HTMLElement){var r=e.on.getBoundingClientRect();e.from.x+=r.left,e.from.y+=r.top}e.by&&!e.to&&(e.to={x:e.from.x+e.by.x,y:e.from.y+e.by.y});var u=e.to.x-e.from.x,s=e.to.y-e.from.y,c=Math.sqrt(u*u+s*s),h=e.duration||c/t,f=Math.round(h/n),a=u/f,m=s/f,d=0,v=e.from.x,l=e.from.y;i.down(v,l),o()}}();